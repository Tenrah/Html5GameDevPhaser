BasicGame={score:0,music:null,orientated:!1},BasicGame.Boot=function(a){},BasicGame.Boot.prototype={init:function(){this.input.maxPointers=1,this.stage.disableVisibilityChange=!0,this.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.scale.setMinMax(480,260,1024,768),this.scale.pageAlignHorizontally=!0,this.scale.pageAlignVertically=!0,this.game.device.desktop||(this.scale.forceOrientation(!0,!1),this.scale.setResizeCallback(this.gameResized,this),this.scale.enterIncorrectOrientation.add(this.enterIncorrectOrientation,this),this.scale.leaveIncorrectOrientation.add(this.leaveIncorrectOrientation,this))},create:function(){this.state.start("Preloader")},gameResized:function(a,b){},enterIncorrectOrientation:function(){BasicGame.orientated=!1,document.getElementById("orientation").style.display="block"},leaveIncorrectOrientation:function(){BasicGame.orientated=!0,document.getElementById("orientation").style.display="none"}},BasicGame.Preloader=function(a){this.background=null,this.preloadBar=null},BasicGame.Preloader.prototype={preload:function(){this.load.image("logoScreen","assets/logoScreen.png"),this.load.image("groundConcrete","assets/groundConcrete.png"),this.load.image("playerBulletNormal","assets/playerBulletNormal.png"),this.load.image("playerBulletPower","assets/playerBulletPower.png"),this.load.image("turretBullet","assets/turretBullet.png"),this.load.image("player","assets/Player.png"),this.load.image("monsterAnt","assets/monsterAnt.png"),this.load.image("monsterScorpion","assets/monsterScorpion.png"),this.load.image("monsterSpider","assets/monsterSpider.png"),this.load.image("turretBase","assets/turretBase.png"),this.load.image("turretGun","assets/turretGun.png"),this.load.image("monsterBossHead","assets/monsterBoss_HeadPortion.png"),this.load.image("monsterBossBody","assets/monsterBoss_BodyPortion.png")},create:function(){this.state.start("MainMenu")}},BasicGame.MainMenu=function(a){this.game=a},BasicGame.MainMenu.prototype={create:function(){this.add.sprite(0,0,"logoScreen"),this.startGameText=this.game.add.text(30,490,"Click to start playing",{fontSize:"20px",fill:"#fff"}),this.helpText=this.game.add.text(550,500,"Controls: 'Esc to pause' \n Movement: Arrow keys (WASD) \n Rotation: Mouse \n Fire: Mouse Left Button \n Change firemode: Shift",{fontSize:"12px",fill:"#fff"}),this.todoText=this.game.add.text(30,520,"TODO: \n !Strafing not implemented yet! \n !Turret or Boss spawning not implemented yet! \n !Known BUG: need to reload page to play again!",{fontSize:"12px",fill:"#fff"})},update:function(){this.input.activePointer.isDown&&this.startGame()},startGame:function(a){this.state.start("Game")}},BasicGame.Game=function(a){this.game=a,this.add,this.camera,this.cache,this.input,this.load,this.math,this.sound,this.stage,this.time,this.tweens,this.world,this.particles,this.physics,this.rnd,this.player=new BasicGame.Player(this.game,100,100,5),this.monsterEnemies=[],this.enemiesAlive=0,this.spawnCounter=0,this.maxSpawnCounter=0},BasicGame.Game.prototype={create:function(){this.game.world.setBounds(0,0,2e3,2e3),this.ground=this.game.add.tileSprite(0,0,800,600,"groundConcrete"),this.ground.fixedToCamera=!0,this.physics.startSystem(Phaser.Physics.ARCADE),this.player.create(),this.monsterAntSpawner=this.game.rnd.integerInRange(10,50),this.monsterScorpionSpawner=this.game.rnd.integerInRange(4,10),this.monsterSpiderSpawner=this.game.rnd.integerInRange(7,15),this.monsterTurretSpawner=this.game.rnd.integerInRange(5,10),this.monsterBossSpawner=this.game.rnd.integerInRange(1,1),this.enemySpawner(this.monsterEnemies,this.monsterAntSpawner,this.game,"monsterAnt",null,this.player,1,null,.5,200),this.enemySpawner(this.monsterEnemies,this.monsterScorpionSpawner,this.game,"monsterScorpion",null,this.player,10,null,1.5,100),this.enemySpawner(this.monsterEnemies,this.monsterSpiderSpawner,this.game,"monsterSpider",null,this.player,3,null,1.5,150),this.healthText=this.game.add.text(8,545,"Health: "+this.player.sprite.health,{fontSize:"20px",fill:"#000"}),this.healthText.fixedToCamera=!0,this.healthText.cameraOffset.setTo(8,545),this.fireModeText=this.game.add.text(8,570,"Firemode: "+this.player.fireModeName,{fontSize:"20px",fill:"#000"}),this.fireModeText.fixedToCamera=!0,this.fireModeText.cameraOffset.setTo(8,570),this.game.camera.follow(this.player.sprite),this.game.camera.deadzone=new Phaser.Rectangle(150,150,300,100),this.game.camera.focusOnXY(0,0)},enemySpawner:function(a,b,c,d,e,f,g,h,i,j){for(this.maxSpawnCounter+=b,this.spawnCounter;this.spawnCounter<this.maxSpawnCounter;this.spawnCounter++)a.push(new BasicGame.Enemy(c,d,e,f,g,this.spawnCounter,h,i,j)),a[this.spawnCounter].create()},update:function(){this.player.update(),this.enemiesAlive=0;for(var a=0;a<this.monsterEnemies.length;a++)this.monsterEnemies[a].alive&&(this.enemiesAlive++,this.game.physics.arcade.collide(this.player.sprite,this.monsterEnemies[a].sprite),this.game.physics.arcade.overlap(this.player.sprite,this.monsterEnemies[a].sprite,this.enemyHitPlayer,null,this),this.game.physics.arcade.overlap(this.player.bullets,this.monsterEnemies[a].sprite,this.playerHitEnemy,null,this),this.monsterEnemies[a].update());this.fireModeText.text="Firemode: "+this.player.fireModeName,this.ground.tilePosition.x=-this.game.camera.x,this.ground.tilePosition.y=-this.game.camera.y,this.escKey=this.game.input.keyboard.addKey(Phaser.KeyCode.ESC),this.escKey.onDown.add(this.pauseGame,this),!this.player.alive&&this.input.activePointer.isDown&&this.quitGame(),0===this.enemiesAlive&&(this.gameoverText=this.game.add.text(50,200,"Congratulations! \n All enemies killed! \n Click to quit",{fontSize:"70px",fill:"#000"}),this.gameoverText.fixedToCamera=!0,this.gameoverText.cameraOffset.setTo(210,200),this.input.activePointer.isDown&&this.quitGame())},enemyHitPlayer:function(a,b){a.damage(this.monsterEnemies[b.name].damage),this.healthText.text="Health: "+Math.floor(this.player.sprite.health),a.health<=0&&(this.player.alive=!1,this.gameoverText=this.game.add.text(210,200,"Game Over",{fontSize:"72px",fill:"#000"}),this.gameoverText.fixedToCamera=!0,this.gameoverText.cameraOffset.setTo(210,200))},playerHitEnemy:function(a,b){b.kill(),this.monsterEnemies[a.name].damaged()},pauseGame:function(){this.game.physics.arcade.isPaused=!this.game.physics.arcade.isPaused,this.game.physics.arcade.isPaused?(this.pauseText=this.game.add.text(280,200,"Paused",{fontSize:"72px",fill:"#000"}),this.pauseText.fixedToCamera=!0,this.pauseText.cameraOffset.setTo(280,200)):this.pauseText.text=""},quitGame:function(a){this.state.start("MainMenu",!0,!1)}},BasicGame.Player=function(a,b,c,d){this.game=a,this.x=b,this.y=c,this.health=d,this.sprite=null,this.currentSpeed=0,this.currentFireMode=1,this.fireModeName=null,this.bullets,this.damage=1,this.fireRate=200,this.bulletSpeed=600,this.nextFire=0,this.alive=!0},BasicGame.Player.prototype={create:function(){this.sprite=this.game.add.sprite(this.x,this.y,"player"),this.sprite.anchor.setTo(.5,.5),this.bullets=this.game.add.group(),this.bullets.enableBody=!0,this.bullets.physicsBodyType=Phaser.Physics.ARCADE,this.bullets.createMultiple(20,"playerBulletNormal",0,!1),this.bullets.setAll("anchor.x",-1.3),this.bullets.setAll("anchor.y",-.5),this.bullets.setAll("outOfBoundsKill",!0),this.bullets.setAll("checkWorldBounds",!0),this.fireModeName="Normal Shot",this.sprite.health=this.health,this.game.physics.arcade.enable(this.sprite),this.sprite.body.collideWorldBounds=!0,this.cursors=this.game.input.keyboard.createCursorKeys(),this.wKey=this.game.input.keyboard.addKey(Phaser.KeyCode.W),this.aKey=this.game.input.keyboard.addKey(Phaser.KeyCode.A),this.sKey=this.game.input.keyboard.addKey(Phaser.KeyCode.S),this.dKey=this.game.input.keyboard.addKey(Phaser.KeyCode.D),this.changeFireModeKey=this.game.input.keyboard.addKey(Phaser.KeyCode.SHIFT),this.changeFireModeKey.onDown.add(this.nextFireMode,this)},nextFireMode:function(){this.currentFireMode++,this.currentFireMode>2&&(this.currentFireMode=1),1===this.currentFireMode?(this.damage=1,this.fireRate=200,this.bulletSpeed=600,this.bullets=this.game.add.group(),this.bullets.enableBody=!0,this.bullets.physicsBodyType=Phaser.Physics.ARCADE,this.bullets.createMultiple(20,"playerBulletNormal",0,!1),this.bullets.setAll("anchor.x",-1.3),this.bullets.setAll("anchor.y",-.5),this.bullets.setAll("outOfBoundsKill",!0),this.bullets.setAll("checkWorldBounds",!0),this.fireModeName="Normal Shot"):2===this.currentFireMode&&(this.damage=2,this.fireRate=2e3,this.bulletSpeed=300,this.bullets=this.game.add.group(),this.bullets.enableBody=!0,this.bullets.physicsBodyType=Phaser.Physics.ARCADE,this.bullets.createMultiple(20,"playerBulletPower",0,!1),this.bullets.setAll("anchor.x",-1.2),this.bullets.setAll("anchor.y",.1),this.bullets.setAll("outOfBoundsKill",!0),this.bullets.setAll("checkWorldBounds",!0),this.fireModeName="Power Shot")},update:function(){this.sprite.body.velocity.x=0,this.sprite.body.velocity.y=0,this.cursors.up.isDown||this.wKey.isDown?this.currentSpeed=100:this.currentSpeed>0&&(this.currentSpeed=-4),this.cursors.down.isDown||this.sKey.isDown?this.currentSpeed=-80:this.currentSpeed<-5&&(this.currentSpeed=-4),this.currentSpeed>0?this.game.physics.arcade.velocityFromRotation(this.sprite.rotation,this.currentSpeed,this.sprite.body.velocity):this.currentSpeed<-5&&this.game.physics.arcade.velocityFromRotation(this.sprite.rotation,this.currentSpeed,this.sprite.body.velocity),this.game.physics.arcade.isPaused||(this.sprite.rotation=this.game.physics.arcade.angleToPointer(this.sprite)),this.game.input.activePointer.isDown&&this.alive&&!this.game.physics.arcade.isPaused&&this.fire()},fire:function(){if(this.game.time.now>this.nextFire&&this.bullets.countDead()>0){this.nextFire=this.game.time.now+this.fireRate;var a=this.bullets.getFirstExists(!1);a.reset(this.sprite.x,this.sprite.y),a.rotation=this.game.physics.arcade.moveToPointer(a,this.bulletSpeed,this.game.input.activePointer)}}},BasicGame.Enemy=function(a,b,c,d,e,f,g,h,i){this.x=a.world.randomX,this.y=a.world.randomY,this.game=a,this.enemyType=b,this.additionalPart=c,this.player=d,this.health=e,this.name=f,this.projectiles=g,this.damage=h,this.speed=i,this.nextFire=0,this.fireRate=800,this.alive=!0},BasicGame.Enemy.prototype={create:function(){if((this.x<=300||this.y<=300)&&(this.x=this.game.rnd.integerInRange(800, 2000),this.y=this.game.rnd.integerInRange(800, 2000)),"monsterAnt"===this.enemyType||"monsterScorpion"===this.enemyType||"monsterSpider"===this.enemyType)this.sprite=this.game.add.sprite(this.x,this.y,this.enemyType),this.sprite.anchor.setTo(.5,.5),this.game.physics.enable(this.sprite,Phaser.Physics.ARCADE),this.sprite.body.immovable=!1,this.sprite.angle=this.game.rnd.angle(),this.sprite.health=this.health,this.sprite.name=this.name.toString(),this.sprite.body.collideWorldBounds=!0;else if("turretBase"===this.enemyType)this.turretBase=this.game.add.sprite(this.x,this.y,this.enemyType),this.turretBase.anchor.setTo(.5,.5),this.turretGun=this.game.add.sprite(this.x,this.y,this.additionalPart),this.turretGun.anchor.setTo(.3,.5),this.game.physics.enable(this.sprite,Phaser.Physics.ARCADE),this.turretBase.body.immovable=!0,this.turretBase.health=this.health,this.turretGun.health=this.health,this.turretBase.name=this.name.toString();else if("monsterBoss_HeadPortion"===this.enemyType){this.monsterBossHead=this.game.add.sprite(this.x,this.y,this.enemyType),this.monsterBossHead.anchor.setTo(.5,.5),this.monsterBossBodySection=new Array,this.monsterBossPath=new Array,this.numMonsterBodySections=10,this.monsterBossSpacer=6,this.game.physics.enable(this.monsterBossHead,Phaser.Physics.ARCADE),this.monsterBossHead.body.immovable=!1;for(var a=1;a<=this.numMonsterBodySections-1;a++)this.monsterBossBodySection[a]=this.game.add.sprite(this.x,this.y,this.additionalPart),this.monsterBossBodySection[a].anchor.setTo(.5,.5),this.monsterBossBodySection[a].health=this.health;for(var a=0;a<=this.numMonsterBodySections*this.monsterBossSpacer;a++)this.monsterBossPath[a]=new Phaser.Point(this.x,this.y);this.monsterBossHead.health=this.health,this.monsterBossHead.name=this.name.toString(),this.monsterBossHead.body.collideWorldBounds=!0}},update:function(){if(this.sprite.rotation=this.game.physics.arcade.angleBetween(this.sprite,this.player.sprite),this.game.physics.arcade.distanceBetween(this.sprite,this.player.sprite)<800&&this.game.physics.arcade.moveToObject(this.sprite,this.player.sprite,this.speed),"turretBase"===this.enemyType&&(this.turretGun.rotation=this.game.physics.arcade.angleBetween(this.turretGun,this.player.sprite),this.game.physics.arcade.distanceBetween(this.turretBase,this.player)<500&&this.game.time.now>this.nextFire&&this.projectiles.countDead()>0)){this.nextFire=this.game.time.now+this.fireRate;var a=this.projectiles.getFirstDead();a.reset(this.turret.x,this.turret.y),a.rotation=this.game.physics.arcade.moveToObject(a,this.player.sprite,this.speed)}if("monsterBoss_HeadPortion"===this.enemyType){this.monsterBossHead.body.velocity(0,0),this.monsterBossHead.body.angularVelocity=0,this.part=this.monsterBossPath.pop(),this.part.setTo(this.monsterBossHead.x,this.monsterBossHead.y),this.monsterBossPath.unshift(this.part);for(var b=1;b<=this.numMonsterBodySections-1;b++)this.monsterBossBodySection[b].x=this.monsterBossPath[b*this.monsterBossSpacer].x,this.monsterBossBodySection[b].y=this.monsterBossPath[b*this.monsterBossSpacer].y}},damaged:function(){return"turretBase"===this.enemyType?(this.turretBase.damage(this.player.damage),this.turretGun.damage(this.player.damage),this.turretGun.health<=0&&(this.alive=!1,this.turretGun.kill(),!0)):(this.sprite.damage(this.player.damage),this.sprite.health<=0&&(this.alive=!1,this.sprite.kill(),!0))}},function(){var a=new Phaser.Game(800,600,Phaser.AUTO,"game");a.state.add("Boot",BasicGame.Boot),a.state.add("Preloader",BasicGame.Preloader),a.state.add("MainMenu",BasicGame.MainMenu),a.state.add("Game",BasicGame.Game),a.state.start("Boot")}();